{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/saad/Desktop/Learning/Amazon Clone/amazon-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{db}from\"./firebase\";import Order from\"./Order\";import\"./Orders.css\";import{useStateValue}from\"./StateProvider\";function Orders(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useStateValue=useStateValue(),_useStateValue2=_slicedToArray(_useStateValue,2),_useStateValue2$=_useStateValue2[0],cart=_useStateValue2$.cart,user=_useStateValue2$.user,dispatch=_useStateValue2[1];useEffect(function(){// console.log(\"Orders user = \", user);\nif(!user){setOrders([]);}else{console.log(\"In the else block\");db.collection(\"users\").doc(user===null||user===void 0?void 0:user.uid).collection(\"orders\").orderBy(\"createdAt\",\"desc\").onSnapshot(function(snapshot){return setOrders(snapshot.docs.map(function(doc){return{id:doc.id,data:doc.data()};}));});}console.log(\"User orders = \",orders);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"orders\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Orders\"}),/*#__PURE__*/_jsx(\"div\",{className:\"orders__order\",children:orders===null||orders===void 0?void 0:orders.map(function(order){return/*#__PURE__*/_jsx(Order,{order:order});})})]});}export default Orders;","map":{"version":3,"sources":["/Users/saad/Desktop/Learning/Amazon Clone/amazon-clone/src/Orders.js"],"names":["React","useState","useEffect","db","Order","useStateValue","Orders","orders","setOrders","cart","user","dispatch","console","log","collection","doc","uid","orderBy","onSnapshot","snapshot","docs","map","id","data","order"],"mappings":"qQAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,EAAT,KAAmB,YAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAO,cAAP,CACA,OAASC,aAAT,KAA8B,iBAA9B,CAEA,QAASC,CAAAA,MAAT,EAAkB,eACYL,QAAQ,CAAC,EAAD,CADpB,wCACTM,MADS,eACDC,SADC,kCAEmBH,aAAa,EAFhC,sFAEPI,IAFO,kBAEPA,IAFO,CAEDC,IAFC,kBAEDA,IAFC,CAEOC,QAFP,oBAIhBT,SAAS,CAAC,UAAM,CACd;AACA,GAAI,CAACQ,IAAL,CAAW,CACTF,SAAS,CAAC,EAAD,CAAT,CACD,CAFD,IAEO,CACLI,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACAV,EAAE,CAACW,UAAH,CAAc,OAAd,EACGC,GADH,CACOL,IADP,SACOA,IADP,iBACOA,IAAI,CAAEM,GADb,EAEGF,UAFH,CAEc,QAFd,EAGGG,OAHH,CAGW,WAHX,CAGwB,MAHxB,EAIGC,UAJH,CAIc,SAACC,QAAD,QACVX,CAAAA,SAAS,CACPW,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACN,GAAD,QAAU,CAC1BO,EAAE,CAAEP,GAAG,CAACO,EADkB,CAE1BC,IAAI,CAAER,GAAG,CAACQ,IAAJ,EAFoB,CAAV,EAAlB,CADO,CADC,EAJd,EAYD,CACDX,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8BN,MAA9B,EACD,CApBQ,CAoBN,EApBM,CAAT,CAsBA,mBACE,aAAK,SAAS,CAAC,QAAf,wBACE,mCADF,cAEE,YAAK,SAAS,CAAC,eAAf,UACGA,MADH,SACGA,MADH,iBACGA,MAAM,CAAEc,GAAR,CAAY,SAACG,KAAD,qBACX,KAAC,KAAD,EAAO,KAAK,CAAEA,KAAd,EADW,EAAZ,CADH,EAFF,GADF,CAUD,CAED,cAAelB,CAAAA,MAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { db } from \"./firebase\";\nimport Order from \"./Order\";\nimport \"./Orders.css\";\nimport { useStateValue } from \"./StateProvider\";\n\nfunction Orders() {\n  const [orders, setOrders] = useState([]);\n  const [{ cart, user }, dispatch] = useStateValue();\n\n  useEffect(() => {\n    // console.log(\"Orders user = \", user);\n    if (!user) {\n      setOrders([]);\n    } else {\n      console.log(\"In the else block\");\n      db.collection(\"users\")\n        .doc(user?.uid)\n        .collection(\"orders\")\n        .orderBy(\"createdAt\", \"desc\")\n        .onSnapshot((snapshot) =>\n          setOrders(\n            snapshot.docs.map((doc) => ({\n              id: doc.id,\n              data: doc.data(),\n            }))\n          )\n        );\n    }\n    console.log(\"User orders = \", orders);\n  }, []);\n\n  return (\n    <div className=\"orders\">\n      <h1>Your Orders</h1>\n      <div className=\"orders__order\">\n        {orders?.map((order) => (\n          <Order order={order} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default Orders;\n"]},"metadata":{},"sourceType":"module"}